# use --help shows usage
exec dh use --help
stdout 'dh use'
stdout '\-\-local'
! stderr .

# use with non-installed version fails
! exec dh use 99.99.99
stderr 'not installed'

# use sets default version after setting up a fake installed version
mkdir $DH_HOME/versions/0.36.0
cp meta.toml $DH_HOME/versions/0.36.0/meta.toml
exec dh use 0.36.0
stdout 'Set default version to 0\.36\.0'
exec dh config get default_version
stdout '0\.36\.0'

# use --json returns structured output
exec dh use 0.36.0 --json
stdout '"version": "0.36.0"'
stdout '"scope": "global"'
stdout '"config_path"'

-- meta.toml --
installed_at = 2024-01-15T10:30:00Z
